<script setup lang="ts">
import { computed } from 'vue'
import { useRoute } from 'vue-router'

const route = useRoute()

const items = [
  {
    name: 'Home',
    path: '/',
    icon: 'home'
  },
  {
    name: 'Antrian Saya',
    path: '/queue/me',
    icon: 'list'
  },
  {
    name: 'Profil',
    path: '/profile',
    icon: 'user'
  }
]

const isActive = (path: string) => {
  if (path === '/') {
    return route.path === '/'
  }
  return route.path.startsWith(path)
}
</script>

<template>
  <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-surface-200 safe-area-bottom">
    <div class="flex items-start justify-around px-8 py-2">
      <NuxtLink
        v-for="item in items"
        :key="item.path"
        :to="item.path"
        class="flex flex-col items-center gap-1 py-2 min-w-[60px]"
      >
        <!-- Home Icon -->
        <svg
          v-if="item.icon === 'home'"
          class="w-5 h-5 flex-shrink-0"
          :class="isActive(item.path) ? 'text-primary-600' : 'text-surface-400'"
          viewBox="0 0 21 18"
          fill="currentColor"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path d="M20.243 8.98242C20.243 9.61523 19.7156 10.1109 19.118 10.1109H17.993L18.0176 15.743C18.0176 15.8379 18.0105 15.9328 18 16.0277V16.5938C18 17.3707 17.3707 18 16.5938 18H16.0312C15.9926 18 15.9539 18 15.9152 17.9965C15.866 18 15.8168 18 15.7676 18H14.625H13.7812C13.0043 18 12.375 17.3707 12.375 16.5938V15.75V13.5C12.375 12.8777 11.8723 12.375 11.25 12.375H9C8.37773 12.375 7.875 12.8777 7.875 13.5V15.75V16.5938C7.875 17.3707 7.2457 18 6.46875 18H5.625H4.50352C4.45078 18 4.39805 17.9965 4.34531 17.993C4.30312 17.9965 4.26094 18 4.21875 18H3.65625C2.8793 18 2.25 17.3707 2.25 16.5938V12.6562C2.25 12.6246 2.25 12.5895 2.25352 12.5578V10.1109H1.125C0.492188 10.1109 0 9.61875 0 8.98242C0 8.66602 0.105469 8.38477 0.351562 8.13867L9.36562 0.28125C9.61172 0.0351562 9.89297 0 10.1391 0C10.3852 0 10.6664 0.0703125 10.8773 0.246094L19.8562 8.13867C20.1375 8.38477 20.2781 8.66602 20.243 8.98242Z"/>
        </svg>

        <!-- List Icon -->
        <svg
          v-else-if="item.icon === 'list'"
          class="w-[18px] h-[18px] flex-shrink-0"
          :class="isActive(item.path) ? 'text-primary-600' : 'text-surface-400'"
          viewBox="0 0 18 18"
          fill="currentColor"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path d="M1.40625 1.6875C0.938672 1.6875 0.5625 2.06367 0.5625 2.53125V4.21875C0.5625 4.68633 0.938672 5.0625 1.40625 5.0625H3.09375C3.56133 5.0625 3.9375 4.68633 3.9375 4.21875V2.53125C3.9375 2.06367 3.56133 1.6875 3.09375 1.6875H1.40625ZM6.75 2.25C6.12773 2.25 5.625 2.75273 5.625 3.375C5.625 3.99727 6.12773 4.5 6.75 4.5H16.875C17.4973 4.5 18 3.99727 18 3.375C18 2.75273 17.4973 2.25 16.875 2.25H6.75ZM6.75 7.875C6.12773 7.875 5.625 8.37773 5.625 9C5.625 9.62227 6.12773 10.125 6.75 10.125H16.875C17.4973 10.125 18 9.62227 18 9C18 8.37773 17.4973 7.875 16.875 7.875H6.75ZM6.75 13.5C6.12773 13.5 5.625 14.0027 5.625 14.625C5.625 15.2473 6.12773 15.75 6.75 15.75H16.875C17.4973 15.75 18 15.2473 18 14.625C18 14.0027 17.4973 13.5 16.875 13.5H6.75ZM0.5625 8.15625V9.84375C0.5625 10.3113 0.938672 10.6875 1.40625 10.6875H3.09375C3.56133 10.6875 3.9375 10.3113 3.9375 9.84375V8.15625C3.9375 7.68867 3.56133 7.3125 3.09375 7.3125H1.40625C0.938672 7.3125 0.5625 7.68867 0.5625 8.15625ZM1.40625 12.9375C0.938672 12.9375 0.5625 13.3137 0.5625 13.7812V15.4688C0.5625 15.9363 0.938672 16.3125 1.40625 16.3125H3.09375C3.56133 16.3125 3.9375 15.9363 3.9375 15.4688V13.7812C3.9375 13.3137 3.56133 12.9375 3.09375 12.9375H1.40625Z"/>
        </svg>

        <!-- User Icon -->
        <svg
          v-else-if="item.icon === 'user'"
          class="w-4 h-[18px] flex-shrink-0"
          :class="isActive(item.path) ? 'text-primary-600' : 'text-surface-400'"
          viewBox="0 0 16 18"
          fill="currentColor"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path d="M7.875 9C9.06847 9 10.2131 8.52589 11.057 7.68198C11.9009 6.83807 12.375 5.69347 12.375 4.5C12.375 3.30653 11.9009 2.16193 11.057 1.31802C10.2131 0.474106 9.06847 0 7.875 0C6.68153 0 5.53693 0.474106 4.69302 1.31802C3.84911 2.16193 3.375 3.30653 3.375 4.5C3.375 5.69347 3.84911 6.83807 4.69302 7.68198C5.53693 8.52589 6.68153 9 7.875 9ZM6.26836 10.6875C2.80547 10.6875 0 13.493 0 16.9559C0 17.5324 0.467578 18 1.04414 18H14.7059C15.2824 18 15.75 17.5324 15.75 16.9559C15.75 13.493 12.9445 10.6875 9.48164 10.6875H6.26836Z"/>
        </svg>

        <span
          class="text-xs font-normal leading-4 text-center"
          :class="isActive(item.path) ? 'text-primary-600 font-medium' : 'text-surface-400'"
        >
          {{ item.name }}
        </span>
      </NuxtLink>
    </div>
  </nav>
</template>
