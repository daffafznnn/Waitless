<script setup lang="ts">
import { ref } from 'vue'

interface Props {
  placeholder?: string
  subtitle?: string
}

const props = withDefaults(defineProps<Props>(), {
  placeholder: 'Cari tempat / layanan'
})

const emit = defineEmits<{
  search: [value: string]
  filter: []
}>()

const searchValue = ref('')

const handleSearch = () => {
  emit('search', searchValue.value)
}
</script>

<template>
  <div class="space-y-3">
    <div class="bg-white rounded-2xl shadow-xs p-4">
      <div class="relative">
        <!-- Search Icon -->
        <div class="absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none">
          <svg
            class="w-4 h-4 text-surface-400"
            viewBox="0 0 16 16"
            fill="currentColor"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M13 6.5C13 7.93437 12.5344 9.25938 11.75 10.3344L15.7063 14.2937C16.0969 14.6844 16.0969 15.3188 15.7063 15.7094C15.3156 16.1 14.6812 16.1 14.2906 15.7094L10.3344 11.75C9.25938 12.5375 7.93437 13 6.5 13C2.90937 13 0 10.0906 0 6.5C0 2.90937 2.90937 0 6.5 0C10.0906 0 13 2.90937 13 6.5ZM6.5 11C7.09095 11 7.67611 10.8836 8.22208 10.6575C8.76804 10.4313 9.26412 10.0998 9.68198 9.68198C10.0998 9.26412 10.4313 8.76804 10.6575 8.22208C10.8836 7.67611 11 7.09095 11 6.5C11 5.90905 10.8836 5.32389 10.6575 4.77792C10.4313 4.23196 10.0998 3.73588 9.68198 3.31802C9.26412 2.90016 8.76804 2.56869 8.22208 2.34254C7.67611 2.1164 7.09095 2 6.5 2C5.90905 2 5.32389 2.1164 4.77792 2.34254C4.23196 2.56869 3.73588 2.90016 3.31802 3.31802C2.90016 3.73588 2.56869 4.23196 2.34254 4.77792C2.1164 5.32389 2 5.90905 2 6.5C2 7.09095 2.1164 7.67611 2.34254 8.22208C2.56869 8.76804 2.90016 9.26412 3.31802 9.68198C3.73588 10.0998 4.23196 10.4313 4.77792 10.6575C5.32389 10.8836 5.90905 11 6.5 11Z"/>
          </svg>
        </div>

        <input
          v-model="searchValue"
          type="text"
          :placeholder="placeholder"
          class="w-full h-11 pl-12 pr-12 bg-surface-50 rounded-xl border-0 text-sm text-surface-900 placeholder:text-surface-400 focus:outline-none focus:ring-2 focus:ring-primary-500"
          @keyup.enter="handleSearch"
        >

        <!-- Filter Icon -->
        <button
          class="absolute right-4 top-1/2 -translate-y-1/2"
          @click="emit('filter')"
        >
          <svg
            class="w-4 h-4 text-surface-400"
            viewBox="0 0 16 16"
            fill="currentColor"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M0 13C0 13.5531 0.446875 14 1 14H2.70937C3.09375 14.8844 3.975 15.5 5 15.5C6.025 15.5 6.90625 14.8844 7.29063 14H15C15.5531 14 16 13.5531 16 13C16 12.4469 15.5531 12 15 12H7.29063C6.90625 11.1156 6.025 10.5 5 10.5C3.975 10.5 3.09375 11.1156 2.70937 12H1C0.446875 12 0 12.4469 0 13ZM4 13C4 12.7348 4.10536 12.4804 4.29289 12.2929C4.48043 12.1054 4.73478 12 5 12C5.26522 12 5.51957 12.1054 5.70711 12.2929C5.89464 12.4804 6 12.7348 6 13C6 13.2652 5.89464 13.5196 5.70711 13.7071C5.51957 13.8946 5.26522 14 5 14C4.73478 14 4.48043 13.8946 4.29289 13.7071C4.10536 13.5196 4 13.2652 4 13ZM10 8C10 7.73478 10.1054 7.48043 10.2929 7.29289C10.4804 7.10536 10.7348 7 11 7C11.2652 7 11.5196 7.10536 11.7071 7.29289C11.8946 7.48043 12 7.73478 12 8C12 8.26522 11.8946 8.51957 11.7071 8.70711C11.5196 8.89464 11.2652 9 11 9C10.7348 9 10.4804 8.89464 10.2929 8.70711C10.1054 8.51957 10 8.26522 10 8ZM11 5.5C9.975 5.5 9.09375 6.11562 8.70938 7H1C0.446875 7 0 7.44688 0 8C0 8.55313 0.446875 9 1 9H8.70938C9.09375 9.88437 9.975 10.5 11 10.5C12.025 10.5 12.9062 9.88437 13.2906 9H15C15.5531 9 16 8.55313 16 8C16 7.44688 15.5531 7 15 7H13.2906C12.9062 6.11562 12.025 5.5 11 5.5ZM6 4C5.73478 4 5.48043 3.89464 5.29289 3.70711C5.10536 3.51957 5 3.26522 5 3C5 2.73478 5.10536 2.48043 5.29289 2.29289C5.48043 2.10536 5.73478 2 6 2C6.26522 2 6.51957 2.10536 6.70711 2.29289C6.89464 2.48043 7 2.73478 7 3C7 3.26522 6.89464 3.51957 6.70711 3.70711C6.51957 3.89464 6.26522 4 6 4ZM8.29062 2C7.90625 1.11563 7.025 0.5 6 0.5C4.975 0.5 4.09375 1.11563 3.70937 2H1C0.446875 2 0 2.44687 0 3C0 3.55312 0.446875 4 1 4H3.70937C4.09375 4.88438 4.975 5.5 6 5.5C7.025 5.5 7.90625 4.88438 8.29062 4H15C15.5531 4 16 3.55312 16 3C16 2.44687 15.5531 2 15 2H8.29062Z"/>
          </svg>
        </button>
      </div>
    </div>

    <p v-if="subtitle" class="text-xs text-center text-surface-500">
      {{ subtitle }}
    </p>
  </div>
</template>
